<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Portal - Study Materials & PYQs</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-graduation-cap"></i>Exam Buddy</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto" id="navMenu">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showDashboard()"><i class="fas fa-home"></i> Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showMaterials()"><i class="fas fa-book"></i> Materials</a>
                    </li>
                    <li class="nav-item hidden" id="uploadNavItem">
                        <a class="nav-link" href="#" onclick="showUpload()"><i class="fas fa-upload"></i> Upload</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Login Page -->
    <div id="loginPage" class="auth-container">
        <div class="auth-card">
            <div class="text-center mb-4">
                <i class="fas fa-graduation-cap logo-icon"></i>
            </div>
            <h2 class="text-center">Welcome Back</h2>
            <p class="text-center text-muted mb-4">Login to access study materials</p>
            <form id="loginForm">
                <div class="mb-3">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="loginEmail" placeholder="student@example.com" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" id="loginPassword" placeholder="Enter your password" required>
                </div>
                <div class="alert alert-danger hidden" id="loginError"></div>
                <button type="submit" class="btn btn-primary w-100">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
            </form>
            <p class="text-center mt-4">
                Don't have an account? <a href="#" onclick="showRegister()" class="auth-link">Register here</a>
            </p>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="auth-container hidden">
        <div class="auth-card">
            <div class="text-center mb-4">
                <i class="fas fa-user-plus logo-icon"></i>
            </div>
            <h2 class="text-center">Create Account</h2>
            <p class="text-center text-muted mb-4">Join our learning community</p>
            <form id="registerForm">
                <div class="mb-3">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="registerName" placeholder="John Doe" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="registerEmail" placeholder="student@example.com" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" id="registerPassword" placeholder="Create a strong password" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Role</label>
                    <select class="form-control" id="registerRole" required>
                        <option value="">Select Role</option>
                        <option value="student">Student</option>
                        <option value="faculty">Faculty</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Department</label>
                    <select class="form-control" id="registerDepartment" required>
                        <option value="">Select Department</option>
                        <option value="Computer Science">Computer Science</option>
                        <option value="Electrical">Electrical Engineering</option>
                        <option value="Mechanical">Mechanical Engineering</option>
                        <option value="Civil">Civil Engineering</option>
                        <option value="Electronics">Electronics Engineering</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Semester</label>
                    <select class="form-control" id="registerSemester" required>
                        <option value="">Select Semester</option>
                        <option value="1">1st Semester</option>
                        <option value="2">2nd Semester</option>
                        <option value="3">3rd Semester</option>
                        <option value="4">4th Semester</option>
                        <option value="5">5th Semester</option>
                        <option value="6">6th Semester</option>
                        <option value="7">7th Semester</option>
                        <option value="8">8th Semester</option>
                    </select>
                </div>
                <div class="alert alert-danger hidden" id="registerError"></div>
                <button type="submit" class="btn btn-primary w-100">
                    <i class="fas fa-user-plus"></i> Register
                </button>
            </form>
            <p class="text-center mt-4">
                Already have an account? <a href="#" onclick="showLogin()" class="auth-link">Login here</a>
            </p>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboardPage" class="main-content hidden">
        <div class="container">
            <h1 class="text-white mb-4">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </h1>
            
            <div class="row">
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stats-card">
                        <i class="fas fa-book text-primary"></i>
                        <h3 id="totalMaterials">0</h3>
                        <p class="text-muted mb-0">Total Materials</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stats-card">
                        <i class="fas fa-file-alt text-success"></i>
                        <h3 id="totalPYQs">0</h3>
                        <p class="text-muted mb-0">PYQ Papers</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stats-card">
                        <i class="fas fa-download text-warning"></i>
                        <h3 id="totalDownloads">0</h3>
                        <p class="text-muted mb-0">Downloads</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stats-card">
                        <i class="fas fa-users text-info"></i>
                        <h3 id="totalUsers">0</h3>
                        <p class="text-muted mb-0">Active Users</p>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-12">
                    <div class="material-card">
                        <h4 class="mb-3">
                            <i class="fas fa-star text-warning"></i> Recent Materials
                        </h4>
                        <div id="recentMaterials"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Materials Page -->
    <div id="materialsPage" class="main-content hidden">
        <div class="container">
            <h1 class="text-white mb-4">
                <i class="fas fa-book"></i> Study Materials
            </h1>
            
            <!-- Filters -->
            <div class="filter-section">
                <div class="row g-3">
                    <div class="col-md-3">
                        <input type="text" class="form-control" id="searchInput" placeholder="ðŸ” Search materials...">
                    </div>
                    <div class="col-md-2">
                        <select class="form-control" id="filterDepartment">
                            <option value="">All Departments</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Electrical">Electrical</option>
                            <option value="Mechanical">Mechanical</option>
                            <option value="Civil">Civil</option>
                            <option value="Electronics">Electronics</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-control" id="filterSemester">
                            <option value="">All Semesters</option>
                            <option value="1">Semester 1</option>
                            <option value="2">Semester 2</option>
                            <option value="3">Semester 3</option>
                            <option value="4">Semester 4</option>
                            <option value="5">Semester 5</option>
                            <option value="6">Semester 6</option>
                            <option value="7">Semester 7</option>
                            <option value="8">Semester 8</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-control" id="filterType">
                            <option value="">All Types</option>
                            <option value="notes">Notes</option>
                            <option value="pyq">PYQ</option>
                            <option value="syllabus">Syllabus</option>
                            <option value="reference">Reference</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <button class="btn btn-primary w-100" onclick="applyFilters()">
                            <i class="fas fa-filter"></i> Apply Filters
                        </button>
                    </div>
                </div>
            </div>

            <!-- Materials List -->
            <div id="materialsList">
                <div class="text-center py-5">
                    <div class="spinner-border text-white" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="text-white mt-3">Loading materials...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Page (Faculty Only) -->
    <div id="uploadPage" class="main-content hidden">
        <div class="container">
            <h1 class="text-white mb-4">
                <i class="fas fa-upload"></i> Upload Material
            </h1>
            <div class="upload-section">
                <form id="uploadForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label"><i class="fas fa-heading"></i> Title</label>
                                <input type="text" class="form-control" id="uploadTitle" placeholder="e.g., Data Structures Notes" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label"><i class="fas fa-book-open"></i> Subject</label>
                                <input type="text" class="form-control" id="uploadSubject" placeholder="e.g., DSA" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label class="form-label"><i class="fas fa-building"></i> Department</label>
                                <select class="form-control" id="uploadDepartment" required>
                                    <option value="">Select Department</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Electrical">Electrical</option>
                                    <option value="Mechanical">Mechanical</option>
                                    <option value="Civil">Civil</option>
                                    <option value="Electronics">Electronics</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label class="form-label"><i class="fas fa-layer-group"></i> Semester</label>
                                <select class="form-control" id="uploadSemester" required>
                                    <option value="">Select Semester</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label class="form-label"><i class="fas fa-tag"></i> Type</label>
                                <select class="form-control" id="uploadType" required>
                                    <option value="">Select Type</option>
                                    <option value="notes">Notes</option>
                                    <option value="pyq">PYQ</option>
                                    <option value="syllabus">Syllabus</option>
                                    <option value="reference">Reference</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-align-left"></i> Description</label>
                        <textarea class="form-control" id="uploadDescription" rows="3" placeholder="Brief description of the material..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-calendar"></i> Year (Optional, for PYQs)</label>
                        <input type="number" class="form-control" id="uploadYear" min="2000" max="2025" placeholder="e.g., 2024">
                    </div>
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-file-upload"></i> Upload File</label>
                        <input type="file" class="form-control" id="uploadFile" accept=".pdf,.doc,.docx,.ppt,.pptx,.txt" required>
                        <small class="text-muted">Supported formats: PDF, DOC, DOCX, PPT, PPTX, TXT (Max 50MB)</small>
                    </div>
                    <div class="alert alert-danger hidden" id="uploadError"></div>
                    <div class="alert alert-success hidden" id="uploadSuccess"></div>
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-cloud-upload-alt"></i> Upload Material
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Chatbot -->
    <div class="chatbot-container">
        <button class="chatbot-toggle" onclick="toggleChatbot()" title="Chat with AI Assistant">
            <i class="fas fa-comments"></i>
        </button>
        <div class="chatbot-window" id="chatbotWindow">
            <div class="chatbot-header">
                <div>
                    <i class="fas fa-robot"></i> AI Study Assistant
                </div>
                <button onclick="toggleChatbot()" class="chatbot-close-btn" title="Close chat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chatbot-messages" id="chatMessages">
                <div class="message bot">
                    ðŸ‘‹ Hi! I'm your AI study assistant. I can help you find materials, PYQs, and answer your questions about the portal. How can I help you today?
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="chatInput" placeholder="Ask me anything..." onkeypress="handleChatKeyPress(event)">
                <button onclick="sendMessage()" title="Send message">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="script.js"></script>
</body>
</html>